<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: api/session/response.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: api/session/response.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { settings } from "../../settings"

/** *****************************************************************************
 * Copyright (c) 2018 Nosto Solutions Ltd All Rights Reserved.
 * &lt;p>
 * This software is the confidential and proprietary information of
 * Nosto Solutions Ltd ("Confidential Information"). You shall not
 * disclose such Confidential Information and shall use it only in
 * accordance with the terms of the agreement you entered into with
 * Nosto Solutions Ltd.
 ***************************************************************************** */

/**
 * Decouple the returned response data from the ev1 response format for stability
 * @param response
 * @param responseMode
 * @property {Object} recommendations the recommendation response
 * @property {Number} page_views the page-view count of the user
 * @property {Object} geo_location the geo-location of the user
 * @property {Object} affinities the affinities of the user
 * @constructor
 */
function ActionResponse({ recommendations, gl, pv, af }, responseMode) {
  if (responseMode === "HTML") {
    this.recommendations = recommendations
    // noinspection JSUnusedGlobalSymbols
    this.page_views = pv
    // noinspection JSUnusedGlobalSymbols
    this.geo_location = gl
    // noinspection JSUnusedGlobalSymbols
    this.affinities = af
  } else {
    // @todo needs clarity on what is going on here. This is probably a hack.
    const recs = {}
    Object.keys(recommendations || {}).forEach(key => {
      const value = recommendations[key]
      const params = { [settings.nostoRefParam]: value.result_id }
      if (value.source_product_ids &amp;&amp; value.source_product_ids.length) {
        params.refSrc = value.source_product_ids.join(",")
      }
      /* jshint ignore:start */
      recs[key] = {
        ...value,
        params
      }
      /* jshint ignore:end */
    })


    this.recommendations = recs
    // noinspection JSUnusedGlobalSymbols
    this.page_views = pv
    // noinspection JSUnusedGlobalSymbols
    this.geo_location = gl
    // noinspection JSUnusedGlobalSymbols
    this.affinities = af
  }
}

export default ActionResponse
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Action.html">Action</a></li><li><a href="ActionResponse.html">ActionResponse</a></li><li><a href="Api.html">Api</a></li><li><a href="Session.html">Session</a></li></ul><h3>Global</h3><ul><li><a href="global.html#enhanceProduct">enhanceProduct</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Fri Jul 24 2020 13:12:08 GMT+0300 (Eastern European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
