<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Session</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Session</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Session</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>



















    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>nostojs(function(api) {
  let session = api.defaultSession()
   .setVariation("USD")
   .setCustomer(customer)</code></pre>

    <pre class="prettyprint"><code>In order to view a product
  session.viewProduct("123")
    .setPlacements(["product1"])
    .load()</code></pre>

    <pre class="prettyprint"><code>In order to view a product with attribution
 session.viewProduct("123")
     .setRef("123", "example_reco_id")
     .load()</code></pre>

    <pre class="prettyprint"><code>session.viewProduct({product_id: "123"})
    .setPlacements(["product1"])
    .load()</code></pre>

    <pre class="prettyprint"><code>// view product under category
 session.viewProduct("123")
    .setCategories(["/men/trousers"])
    .setPlacements(["product1"])
    .load()</code></pre>

    <pre class="prettyprint"><code>// view category
 session.viewCategory("/men/trousers")
   .setPlacements(["category123"])
   .load()</code></pre>

    <pre class="prettyprint"><code>// view tag
 session.viewTag("offers")
   .setPlacements(["offers1"])
   .load()</code></pre>

    <pre class="prettyprint"><code>// add order
 session.addOrder(order)
   .setPlacements(["order1"])
   .load()</code></pre>

    <pre class="prettyprint"><code>// set cart data
 session.setCart(cart).newAction()
   .setPlacements(["cart1", "cart2"])
   .load()
});</code></pre>

    <pre class="prettyprint"><code>// report product added to cart
session.reportAddToCart("123", "reco-slot-1")
   .load()</code></pre>



    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="addOrder"><span class="type-signature"></span>addOrder<span class="signature">(order)</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Create a new action for an order page. This should only be used on order
confirmation / thank you pages.
<p/>
You do not need to specify the page-type explicitly as it is inferred
from the action.
<p/>
You must invoke the load method on the resultant
action in order for the request to be made.*
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>order</code></td>
            

            <td class="type">
            
                
<span class="param-type">Order</span>


            
            </td>

            

            

            <td class="description last">the information about the order that was placed</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="reportAddToCart"><span class="type-signature"></span>reportAddToCart<span class="signature">(product, element)</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Creates an action to report that product was added to the shopping cart,
e.g. from the recommendation slot with "Add to cart" button.
<p>
You must invoke the load method on the resultant
action in order for the request to be made.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>product</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>element</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setCart"><span class="type-signature"></span>setCart<span class="signature">(cart)</span><span class="type-signature"> &rarr; {<a href="Session.html">Session</a>}</span></h4>
    

    



<div class="description">
    Sets the information about the user's current shopping cart. It the user
does not have any items in his shopping cart, you can pass <code>null<code>.
Passing <code>null<code> will nullify the user's shopping cart on Nosto's
end. You must also pass in the shopping cart content in it's entirety as
partial content are not supported.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>cart</code></td>
            

            <td class="type">
            
                
<span class="param-type">Cart</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last">the details of the user's shopping cart contents</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the current session
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Session.html">Session</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setCustomer"><span class="type-signature"></span>setCustomer<span class="signature">(customer)</span><span class="type-signature"> &rarr; {<a href="Session.html">Session</a>}</span></h4>
    

    



<div class="description">
    Sets the information about the currently logged in customer. If the current
customer is not provided, you will not be able to leverage features such as
triggered emails. While it is recommended to always provide the details of
the currently logged in customer, it may be omitted if there are concerns
about privacy or compliance.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>customer</code></td>
            

            <td class="type">
            
                
<span class="param-type">Customer</span>


            
            </td>

            

            

            <td class="description last">the details of the currently logged in customer</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the current session
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Session.html">Session</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setExternalVisitRef"><span class="type-signature"></span>setExternalVisitRef<span class="signature">(ref)</span><span class="type-signature"> &rarr; {<a href="Session.html">Session</a>}</span></h4>
    

    



<div class="description">
    Sets the external visit reference for the current session. An external visit
reference is an external identifier provided by you which allows you to
move the session between domains.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ref</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">the external reference to the session</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    
        <dt class="important tag-deprecated">Deprecated:</dt><dd><ul class="dummy"><li>as this is often implemented incorrectly leading to polluted data</li></ul></dd>
    

    

    

    

    

    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>expand article on how external visit references should be used</li>
        </ul>
    </dd>
    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the current session
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Session.html">Session</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setResponseMode"><span class="type-signature"></span>setResponseMode<span class="signature">(mode)</span><span class="type-signature"> &rarr; {<a href="Session.html">Session</a>}</span></h4>
    

    



<div class="description">
    Sets the response type to HTML or JSON_ORIGINAL. This denotes the preferred
response type of the recommendation result.
If you would like to access the raw recommendation data in <code>JSON</code> form, specify
<code>JSON</code>. When you specify JSON, you will need to template the result yourself.
If you require a more simplified approach, specify <code>HTML</code>. When you specify
<code>HTML</code>, you get back HTML blobs, that you may simply inject into
you placements.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>mode</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">the response mode for the recommendation data</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the current session
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Session.html">Session</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setRestoreLink"><span class="type-signature"></span>setRestoreLink<span class="signature">(restoreLink)</span><span class="type-signature"> &rarr; {<a href="Session.html">Session</a>}</span></h4>
    

    



<div class="description">
    Sets the restore link for the current session. Restore links can be leveraged
in email campaigns. Restore links allow the the user to restore the cart
contents in a single click.
<p/>
Read more about
<a href="https://help.nosto.com/en/articles/664692">how to leverage the restore cart link</a>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>restoreLink</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">the secure URL to restore the user's current session</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the current session
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Session.html">Session</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setVariation"><span class="type-signature"></span>setVariation<span class="signature">(variation)</span><span class="type-signature"> &rarr; {<a href="Session.html">Session</a>}</span></h4>
    

    



<div class="description">
    Sets the current variation identifier for the session. A variation identifier
identifies the current currency (or the current customer group). If your site
uses multi-currency, you must provide the ISO code current currency being viewed.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>variation</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">the case-sensitive identifier of the current variation</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the current session
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Session.html">Session</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="viewCart"><span class="type-signature"></span>viewCart<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Create a new action for a cart page. This should be used on all cart and
checkout pages. If your site has a multi-step checkout, it is recommended
that you send this event on each checkout page.
<p/>
You must invoke the load method on the resultant
action in order for the request to be made.
<p/>
You do not need to specify the page-type explicitly as it is inferred
from the action.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="viewCategory"><span class="type-signature"></span>viewCategory<span class="signature">(categories)</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Create a new action for a category page. This should be used on all
category, collection of brand pages.
<p/>
You must invoke the load method on the resultant
action in order for the request to be made.
<p/>
You do not need to specify the page-type explicitly as it is inferred
from the action.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>categories</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="viewFrontPage"><span class="type-signature"></span>viewFrontPage<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Create a new action for a front page. This should be used when the user
visits the home page.
<p/>
You must invoke the load method on the resultant
action in order for the request to be made.
<p/>
You do not need to specify the page-type explicitly as it is inferred
from the action.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="viewNotFound"><span class="type-signature"></span>viewNotFound<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Create a new action for a not found page. This should be used only on 404
pages.
<p/>
You must invoke the load method on the resultant
action in order for the request to be made.
<p/>
You do not need to specify the page-type explicitly as it is inferred
from the action.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="viewOther"><span class="type-signature"></span>viewOther<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Create a new action for a general page. This should be used only on
pages that don't have a corresponding action. For example, if the user
is viewing a page such as a "Contact Us" page, you should use the viewOther
action.
<p/>
You must invoke the load method on the resultant
action in order for the request to be made.
<p/>
You do not need to specify the page-type explicitly as it is inferred
from the action.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="viewProduct"><span class="type-signature"></span>viewProduct<span class="signature">(product)</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Create a new action for a product page. This must be used only when a
product is being viewed.
<p/>
You must invoke the load method on the resultant
action in order for the request to be made.
<p/>
You do not need to specify the page-type explicitly as it is inferred
from the action.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>product</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="viewSearch"><span class="type-signature"></span>viewSearch<span class="signature">(searchTerms)</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Create a new action for a search page. This should be used only
on search pages. A search page action requires you to pass the search
term. For example, if the user search for "black shoes", you must pass
in "black shoes" and not an encoded version such as "black+shoes".
<p/>
You must invoke the load method on the resultant
action in order for the request to be made.
<p/>
You do not need to specify the page-type explicitly as it is inferred
from the action.
Search terms are not case-sensitive.
<p/>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>searchTerms</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;String></span>


            
            </td>

            

            

            <td class="description last">the non-encoded search terms</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="viewTag"><span class="type-signature"></span>viewTag<span class="signature">(tags)</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>
    

    



<div class="description">
    Create a new action for a tag page. This should be used only on tag pages.
<p/>
You must invoke the load method on the resultant
action in order for the request to be made.
<p/>
You do not need to specify the page-type explicitly as it is inferred
from the action.
Note: tags are not case-sensitive.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tags</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;String></span>


            
            </td>

            

            

            <td class="description last">the set of the tags being viewed.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    
        <dt class="important tag-deprecated">Deprecated:</dt><dd><ul class="dummy"><li>as this is an advanced action with a limited a use case</li></ul></dd>
    

    

    

    

    

    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    the action instance to load content or track events.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Action.html">Action</a></li><li><a href="ActionResponse.html">ActionResponse</a></li><li><a href="Api.html">Api</a></li><li><a href="RequestBuilder.html">RequestBuilder</a></li><li><a href="Session.html">Session</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Fri Jul 24 2020 15:38:20 GMT+0300 (Eastern European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>